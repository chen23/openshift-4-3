title: OpenShift Shared DNS Resources
description: Shared resources required for creating DNS records
definitions:
  self_address:
    title: "Self-IP of LTM device (could be on the same device)"
    description: "This will be used as the target address of the BIG-IP DNS server object"
  virtual_address:
    title: "Virtual address of LTM that will be used by OCP API/router"
parameters:
  self_address: 192.168.1.201
  virtual_address: 192.168.131.10
template: |
  {
    "$schema": "https://raw.githubusercontent.com/F5Networks/f5-appsvcs-extension/master/schema/latest/as3-schema.json",
    "class": "AS3",
    "declaration": {
        "class": "ADC",
        "schemaVersion": "3.20.0",
        "Common": {
            "class": "Tenant",
            "Shared": {
                "class": "Application",
                "template": "shared",
                "SharedVIP": {
                    "class": "Service_Address",
                    "virtualAddress": "{{virtual_address}}"
                },
                "DataCenterOne": {
                    "class": "GSLB_Data_Center"
                },
                "OCPDNS": {
                    "class": "GSLB_Server",
                    "dataCenter": {
                        "use": "DataCenterOne"
                    },
                    "devices": [
                        {
                            "address": "{{ self_address }}",
                            "addressTranslation": "{{ self_address }}"
                        }
                    ],
                    "virtualServers": [
                        {
                            "address": "{{virtual_address}}",
                            "addressTranslation": "{{virtual_address}}",
                            "addressTranslationPort": 443,
                            "port": 443
                        },
                                                {
                            "address": "{{virtual_address}}0",
                            "addressTranslation": "{{virtual_address}}0",
                            "addressTranslationPort": 80,
                            "port": 80
                        },
                        {
                            "address": "{{virtual_address}}1",
                            "addressTranslation": "{{virtual_address}}1",
                            "addressTranslationPort": 80,
                            "port": 80
                        },
                        {
                            "address": "{{virtual_address}}2",
                            "addressTranslation": "{{virtual_address}}2",
                            "addressTranslationPort": 80,
                            "port": 80
                        },
                        {
                            "address": "{{virtual_address}}",
                            "addressTranslation": "{{virtual_address}}",
                            "addressTranslationPort": 80,
                            "port": 80
                        }
                    ]
                }
            }
                    }
        }   
  }

